= render :partial => 'shared/hero_gallery', locals: {promotions: @hero_promotions}

#wallet_offers_management

  %script#populated_wallet_item_template{type: 'text/x-handlebars-template' }
    = render partial: 'wallets/populated_wallet_item', locals: { wallet_item: WalletItemPresenter::PopulatedWalletItemJsPresenter.new }
  %script#open_wallet_item_template{type: 'text/x-handlebars-template' }
    = render partial: 'wallets/open_wallet_item', locals: { wallet_item: WalletItemPresenter::OpenWalletItemJsPresenter.new }
  %script#locked_wallet_item_template{type: 'text/x-handlebars-template' }
    = render partial: 'wallets/locked_wallet_item', locals: { wallet_item: WalletItemPresenter::LockedWalletItemJsPresenter.new }
  %script#offer_item_template{type: 'text/x-handlebars-template' }
    = render partial: 'shared/offer_item', locals: {presenter: OfferItemJsPresenter.new(virtual_currency: current_virtual_currency), button_label: 'Add to wallet'}

  .column-container
    .wallet.layout-inner
      .left-column
        .flag.feature
          %h1 My Wallet

        #wallet_items_bucket
          - @wallet_items.each do |wallet_item|
            = render partial: "#{wallet_item.partial}", locals: { wallet_item: wallet_item }

      .right-column
        .subhead
          %h2 Select From These Offers
        #offers_bucket
          = render partial: 'shared/offer_item', collection: @offers, as: :presenter, locals: {button_label: 'Add to wallet'}
          = render partial: 'shared/offer_detail_modal', collection: @all_offers, as: :presenter


    .clear

#card-add-modal.reveal-modal.cf-modal
  %iframe{src: @card_link_url, style: 'height: 1000px; width: 100%;'}

:javascript
  $(function() {
        Plink.conditionalCallback(
          window.location.search.match(/link_card=true/),
          function () {
            $('#card-add-modal').foundation('reveal', 'open');
          }
        )
      });